<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="PIC32CX-BZ2 Bootloader Services Component Help" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D" />
<meta name="DC.language" content="en-US" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>PIC32CX-BZ2 Bootloader Services Component Help</title>
<meta name="Microsoft.Help.Id" content="GUID-2085FE66-A762-4CC0-B054-7F98E8AF999A-GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D" />
<meta name="Microsoft.Help.TocParent" content="GUID-2085FE66-A762-4CC0-B054-7F98E8AF999A" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB Harmony PIC32CX-BZ System Services Reference A 06/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D">

<h1 class="title topictitle1" id="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D__GUID-D9A86BED-B81C-42D8-8657-24BE47C108E3">PIC32CX-BZ2 Bootloader Services Component
                Help</h1>
<div class="body">
                <p class="p">The PIC32CX-BZ2 Bootloader Services is a utility which helps in creating signed
                        firmware image for OTA with the provided header and OTA header information.
                        Please follow MCC Project Graph and how to add Bootloader services component
                        which is available in Device Resources - Libraries → Harmony → Wireless →
                        Bootloader Services</p>

                <div class="p"><u class="ph u"><strong class="ph b"> Bootloader services utility functional activities with Harmony 3 code
                                        generation</strong></u><ul class="ul" id="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D__UL_LFH_KHZ_XRB">
                                <li class="li with-image" id="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D__GUID-E273A339-27BD-40D1-955E-2225A3A8073B"><u class="ph u">Adds the
                                                autoload.py script which gets loaded in the project
                                                (See Screenshot) for getting the required
                                                information from user for creating signed Firmware </u><p class="p"></p>

                                        <img class="image" id="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D__IMAGE_DMC_SQL_4TB" src="GUID-C0E73886-41A7-4433-997B-F00537750480-low.jpg" /><div class="p">Please find the
                                                description below on the labels.
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D__TABLE_TWV_N2L_4TB" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table 1. </span></span></caption>
                                                  <col style="width:50%" />
                                                  <col style="width:50%" />
                                                  <thead class="thead" style="text-align:left;">
                                                  <tr class="row">
                                                  <th class="entry cellrowborder" style="vertical-align:middle;" id="d17634e47"><span>Label Name</span></th>

                                                  <th class="entry cellrowborder" style="vertical-align:middle;" id="d17634e50"><span>Description</span></th>

                                                  </tr>

                                                  </thead>

                                                  <tbody class="tbody">
                                                  <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e47 "><span>Sequence Number</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e50 "><span>Sequence Number in 64bit Hex format, range
                                                  from 0x00000001 to 0xFFFFFFFE</span></td>

                                                  </tr>

                                                  <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e47 "><span>Manufacture ID</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e50 "><span>Identifier of the Manufacturer. up to 4
                                                  ASCII characters</span></td>

                                                  </tr>

                                                  <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e47 "><span>Auth Method</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e50 "><span>Authentication Method. The supported
                                                  authentication methods are None, SHA256 and
                                                  ECDSA256-SHA256</span></td>

                                                  </tr>

                                                  <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e47 "><span>Firmware Revision</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e50 "><span>Revision of the firmware. It is in the
                                                  format of x.x.x.x, where x is value in range
                                                  0-255</span></td>

                                                  </tr>

                                                  <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e47 "><span>Private Key File</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e50 "><span>Key used for ECDSA Authentication. It is in
                                                  PKCS#8 fromat. This label is enabled only if Auth
                                                  method is ECDSA256-SHA256</span></td>

                                                  </tr>

                                                  </tbody>

                                                  </table>
</div>
</div>
<p class="p">The complete image including firmware
                                                and meta header is signed by the below process</p>
<p class="p"></p>
<p class="p">
                                                <img class="image" id="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D__IMAGE_KMW_2T1_3SB" src="GUID-1F171B42-9FA9-4F72-9034-913CF80C3770-low.png" /></p>
<u class="ph u">Bootloader services
                                                help in embedding OTA header information as part of
                                                the signed firmware binary image which can be done
                                                with OTA tab.</u><p class="p"></p>
<strong class="ph b"><u class="ph u"> Output File Type as BLE
                                                  OTA File</u></strong><p class="p"><img class="image" id="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D__IMAGE_QDT_VQL_4TB" src="GUID-19AC88CB-0BA6-4115-9E08-E6851741E88D-low.jpg" /></p>
<p class="p"><strong class="ph b"><u class="ph u"> Output File
                                                  Type as Zigbee OTA File</u></strong></p>
<p class="p"><img class="image" id="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D__IMAGE_KTM_YQL_4TB" src="GUID-8B985222-55A4-4FC6-A229-95C591FEA8EE-low.jpg" /></p>
<p class="p"><strong class="ph b"><u class="ph u">Output File
                                                  Type as Combo OTA File</u></strong></p>
<p class="p"><img class="image" id="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D__IMAGE_JHG_CRL_4TB" src="GUID-FDC289D1-A4EB-4407-AC83-ACB1099A5B39-low.jpg" /></p>
</li>

                        </ul>
</div>

                <div class="p">Please find the below table which includes the description of the
                        label’s/parameter’s used.
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D__TABLE_CW5_W4L_4TB" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table 2. </span></span></caption>
                                        <col style="width:50%" />
                                        <col style="width:50%" />
                                        <thead class="thead" style="text-align:left;">
                                                <tr class="row">
                                                  <th class="entry cellrowborder" style="vertical-align:middle;" id="d17634e149"><span>Label Name</span></th>

                                                  <th class="entry cellrowborder" style="vertical-align:middle;" id="d17634e152"><span>Description</span></th>

                                                </tr>

                                        </thead>

                                        <tbody class="tbody">
                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Output File Name</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>Output File Name for the OTA package in
                                                  binary format</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Output File Encryption</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>Option to choose whether to Encrypt the OTA
                                                  package or not. Unencrypted /encrypted</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>AES Key</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>This option is enabled only if Output File
                                                  Encryption is set to encrypted. 128bit AES key to
                                                  encrypt the OTA package with AES-CBC-128</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Init Vector</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>This option is enabled only if Output File
                                                  Encryption is set to encrypted.128bit Initial
                                                  Vector to encrypt the OTA package with
                                                  AES-CBC-128</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Output File Type</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>Output file types are among BLE, Zigbee or
                                                  Combo OTA operation</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Flash Image ID</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>This option is enabled only if Output File
                                                  file is set to BLE OTA File or Combo OTA File. It
                                                  is the 32bit Identification Number for App layer
                                                  to confirm the new Flash Image is
                                                  acceptable</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Manufacture Code</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>This option is enabled only if Output File
                                                  file is set to Zigbee OTA File or Combo OTA File.
                                                  It is the 16-bit manufacturer identifier used to
                                                  match supported devices. Defaults to 0xFFFF (match
                                                  all)</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Image Type</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>This option is enabled only if Output File
                                                  file is set to Zigbee OTA File or Combo OTA File.
                                                  It is the 16-bit image type. Defaults to 0xFFFF
                                                  (match all)</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>File Version</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>This option is enabled only if Output File
                                                  file is set to Zigbee OTA File or Combo OTA File.
                                                  It is the 32-bit integer representing the file
                                                  version. Can be in the recommended format (8-bit
                                                  app release, 8-bit app build, 8 bit stack release,
                                                  8-bit stack build), simple increasing version, or
                                                  an unsupported version format. If in an
                                                  unsupported version format the OTA Cluster will
                                                  not be able to compare file versions. Defaults to
                                                  0x0000</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Stack Version</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>This option is enabled only if Output File
                                                  file is set to Zigbee OTA File or Combo OTA File.
                                                  It is the 16-bit identifier of the zigbee stack
                                                  version. Defaults to 0x02 for zigbee Pro.</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Header String</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>This option is enabled only if Output File
                                                  file is set to Zigbee OTA File or Combo OTA File.
                                                  It is the 32-byte string used by each manufacturer
                                                  as they see fit but recommended to be human
                                                  readable</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Security Credential Version</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>This option is enabled only if Output File
                                                  file is set to Zigbee OTA File or Combo OTA File.
                                                  It is the optional 8-bit identifier of the
                                                  Security Credential Version. Defaults to not
                                                  included</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Upgrade File Destination</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>This option is enabled only if Output File
                                                  file is set to Zigbee OTA File or Combo OTA File.
                                                  It is the optional 64-bit extended address of the
                                                  device to which this image is specific. Defaults
                                                  to not include, image is available to all
                                                  devices</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Minimum Hardware Version</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>This option is enabled only if Output File
                                                  file is set to Zigbee OTA File or Combo OTA File.
                                                  It is the optional 0/16-bit integer representing
                                                  the earliest hardware platform this image can be
                                                  used on</span></td>

                                                </tr>

                                                <tr class="row">
                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e149 "><span>Maximum Hardware Version</span></td>

                                                  <td class="entry cellrowborder" style="vertical-align:middle;" headers="d17634e152 "><span>This option is enabled only if Output File
                                                  file is set to Zigbee OTA File or Combo OTA File.
                                                  It is the optional 16-bit integer representing the
                                                  latest hardware platform this image can be used
                                                  on</span></td>

                                                </tr>

                                        </tbody>

                                </table>
</div>
Bootloader services generates linker script with the below memory
                        layout which lets the stack to store the image in Slot 1 during stack OTA
                        process.  </div>

                <p class="p"><img class="image" id="GUID-E95D4418-FDD2-49A3-999F-6EFBA54DDA3D__IMAGE_CL1_PGZ_XRB" src="GUID-6F204CB4-2DD3-49A2-9F21-DDA8A1AD7762-low.png" /></p>

                <p class="p"></p>

        </div>

</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="True Random Number Generator (TRNG)" />
<meta name="DC.relation" scheme="URI" content="GUID-E5AC2B5B-4DA1-4D7D-A714-901692577E30.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="true-random-number-generator-trng" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>True Random Number Generator (TRNG)</title>
<meta name="Microsoft.Help.Id" content="GUID-2085FE66-A762-4CC0-B054-7F98E8AF999A" />
<meta name="Microsoft.Help.TocParent" content="GUID-2085FE66-A762-4CC0-B054-7F98E8AF999A-GUID-E5AC2B5B-4DA1-4D7D-A714-901692577E30" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB Harmony PIC32CX-BZ System Services Reference 4 10/2023" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body>
<div class="nested0" aria-labelledby="ariaid-title1" id="true-random-number-generator-trng"><h1 class="title topictitle1" id="ariaid-title1" style="">True Random Number Generator (TRNG)</h1><div class="body"></div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-E5AC2B5B-4DA1-4D7D-A714-901692577E30.html" title="Enter a short description of your topic here (optional).">SX_symcrypt_API</a></div>
</div>
</div></div>
<div class="topic nested0" aria-labelledby="ariaid-title2" id="trng-api-h-macro"><h1 class="title topictitle1" id="ariaid-title2" style="">TRNG_API_H Macro</h1><div class="body"></div>
<div class="topic nested1" aria-labelledby="ariaid-title3" id="c"><h2 class="title topictitle2" id="ariaid-title3" style="">C</h2><div class="body"><pre class="pre codeblock c"><span class="hl-directive">#define</span> <span class="hl-defines">TRNG_API_H</span>
</pre><p class="p">@file
@copyright Copyright (c) 2020 Silex Insight. All Rights reserved.</p>
<p class="p">The TRNG uses the hardware to generate random number with a high
level of entropy. It's intended to feed entropy into a DRBG.</p>
</div>
</div>
</div>
<div class="topic nested0" aria-labelledby="ariaid-title4" id="configuration-parameters-for-the-trng-"><h1 class="title topictitle1" id="ariaid-title4" style="">Configuration parameters for the TRNG */</h1><div class="body"><p class="p">struct sx_trng_config {</p>
</div>
</div>
<div class="topic nested0" aria-labelledby="ariaid-title5" id="fifo-level-below-which-the-module-leaves-the-idle-state-to-refill-the-fifo"><h1 class="title topictitle1" id="ariaid-title5" style="">FIFO level below which the module leaves the idle state to refill the FIFO</h1><div class="body"><p class="p">In numbers of 128-bit blocks.</p>
<p class="p">Set to 0 to use default.
unsigned int wakeup_level;</p>
</div>
</div>
<div class="topic nested0" aria-labelledby="ariaid-title6" id="number-of-clock-cycles-to-wait-before-sampling-data-from-the-noise-source"><h1 class="title topictitle1" id="ariaid-title6" style="">Number of clock cycles to wait before sampling data from the noise source</h1><div class="body"><p class="p">Set to 0 to use default.
unsigned int init_wait;</p>
</div>
</div>
<div class="topic nested0" aria-labelledby="ariaid-title7" id="number-of-clock-cycles-to-wait-before-stopping-the-rings-after-the-fifo-is-full"><h1 class="title topictitle1" id="ariaid-title7" style="">Number of clock cycles to wait before stopping the rings after the FIFO is full.</h1><div class="body"><p class="p">Set to 0 to use default.
unsigned int off_time_delay;</p>
</div>
</div>
<div class="topic nested0" aria-labelledby="ariaid-title8" id="clock-divider-for-the-frequency-at-which-the-outputs-of-the-rings-are-sampled"><h1 class="title topictitle1" id="ariaid-title8" style="">Clock divider for the frequency at which the outputs of the rings are sampled.</h1><div class="body"><p class="p">Set to 0 to sample at APB interface clock frequency.
unsigned int sample_clock_div;
};</p>
</div>
</div>
<div class="topic nested0" aria-labelledby="ariaid-title9" id="trng-initialization"><h1 class="title topictitle1" id="ariaid-title9" style="">TRNG initialization</h1><div class="body"></div>
</div>
<div class="topic nested0" aria-labelledby="ariaid-title10" id="sx-trng-init-macro"><h1 class="title topictitle1" id="ariaid-title10" style="">SX_TRNG_INIT Macro</h1><div class="body"></div>
<div class="topic nested1" aria-labelledby="ariaid-title11" id="c-1"><h2 class="title topictitle2" id="ariaid-title11" style="">C</h2><div class="body"><pre class="pre codeblock c"><strong class="hl-keyword">typedef</strong> <strong class="hl-keyword">int</strong> (FUNC_SX_TRNG_INIT)(<strong class="hl-keyword">struct</strong> sx_trng ctx, <strong class="hl-keyword">const</strong> <strong class="hl-keyword">struct</strong> sx_trng_config config);
<span class="hl-directive">#define</span> <span class="hl-defines">SX_TRNG_INIT</span> ((FUNC_SX_TRNG_INIT)((uint32_t )(API_TABLE_BASE_ADDRESS + ATO_SX_TRNG_INIT)))
</pre></div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title12" id="parameters"><h2 class="title topictitle2" id="ariaid-title12" style="">Parameters</h2><div class="body"><p class="p"><span class="xref"></span> ctx TRNG context to be used in other operations</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title13" id="parameters-1"><h2 class="title topictitle2" id="ariaid-title13" style="">Parameters</h2><div class="body"><p class="p"><span class="xref"></span> config pointer to optional configuration. NULL to use default.   @return ::SX_OK  @return ::SX_ERR_INCOMPATIBLE_HW</p>
</div>
</div>
</div>
<div class="topic nested0" aria-labelledby="ariaid-title14" id="get-random-bytes"><h1 class="title topictitle1" id="ariaid-title14" style="">Get random bytes</h1><div class="body"><p class="p">When this function returns ::SX_OK, \p size random bytes have been
written to the \p dst memory location. If not enough random bytes are
available, the function does not write any data to \p dst and returns
::SX_ERR_INSUFFICIENT.</p>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title15" id="parameters-2"><h2 class="title topictitle2" id="ariaid-title15" style="">Parameters</h2><div class="body"><p class="p"><span class="xref"></span> ctx TRNG context to be used in other operations</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title16" id="parameters-3"><h2 class="title topictitle2" id="ariaid-title16" style="">Parameters</h2><div class="body"><p class="p"><span class="xref"></span> dst Destination in memory to copy \p size bytes to</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title17" id="parameters-4"><h2 class="title topictitle2" id="ariaid-title17" style="">Parameters</h2><div class="body"><p class="p"><span class="xref"></span> size length in bytes   @return ::SX_OK  @return ::SX_ERR_INSUFFICIENT  @return ::SX_ERR_HARDWARE_FAILURE</p>
</div>
</div>
</div>
</body>
</html>